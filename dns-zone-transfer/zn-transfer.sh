#!/bin/bash
# Autor: Roberto Shimokawa

if [ "$1" == "" ]; then
	echo "How to use"
	echo "$0 [DOMAIN]"
	exit
fi

ht=$1
clear
echo "ZONE TRANSFER INITIALIZED..."
echo "----------------------------"
echo "[+] Collecting nservers."

for rs in $(host -t ns $ht); do
	ns=$(echo $rs | grep "ns" | sed 's/.$//')
	if [ "$ns" != "" ]; then
		echo "[!] Force zone transfer: $ns"
		echo "--------------------------------------------------------------"
		host -l -a $ht $ns
		echo -e "--------------------------------------------------------------"
		echo -e "--------------------------------------------------------------\r\n"
	fi
done
